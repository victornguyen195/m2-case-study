<?php
/** This changes need to valid applying filters and configuration before search process is started. */

/**
 * @var $escaper Magento\Framework\Escaper
 */

$productList = $block->getProductListHtml();
?>

<?php if ($block->getResultCount()): ?>
    <?= /* @noEscape */ $block->getChildHtml('tagged_product_list_rss_link') ?>
    <div class="search results">
        <?php if ($messages = $block->getNoteMessages()): ?>
        <div class="message notice">
            <div>
                <?php foreach ($messages as $message): ?>
                    <?= /* @noEscape */ $message ?><br />
                <?php endforeach; ?>
            </div>
        </div>
        <?php endif; ?>
        <?= /* @noEscape */ $productList ?>
    </div>
<?php else: ?>
    <div class="search results">
        <?= /* @noEscape */ $block->getAdditionalHtml() ?>
        <div class="message notice">
            <div>
                <?= $escaper->escapeHtml($block->getNoResultText() ? $block->getNoResultText() : __('Your search returned no results.')) ?>
                <?php if ($messages = $block->getNoteMessages()): ?>
                    <?php foreach ($messages as $message): ?>
                        <?= /* @noEscape */ $message ?><br />
                    <?php endforeach; ?>
                <?php endif; ?>
            </div>
        </div>
    </div>
<?php endif; ?>
